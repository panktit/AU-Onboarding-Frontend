<mat-toolbar>Add New Onboardee</mat-toolbar>
<div class="container">
  <form [formGroup]="addForm" (ngSubmit)="submit()">
    <mat-horizontal-stepper #stepper formArrayName="formArray" [linear]=false>
      <mat-step formGroupName="0" [stepControl]="personalDetails">
        <ng-template matStepLabel>Personal Details</ng-template>
        <mat-form-field>
          <mat-label>First Name</mat-label>
          <input matInput formControlName="firstName" required>
          <mat-error *ngIf="personalDetails?.get(['firstName']).errors?.required">First Name is required</mat-error>
          <mat-error *ngIf="personalDetails?.get(['firstName']).hasError('minlength')">Minimum 3 characters required</mat-error>
          <mat-error *ngIf="personalDetails?.get(['firstName']).hasError('maxlength')">Maximum 20 characters allowed</mat-error>
        </mat-form-field><br /><br/>
        <mat-form-field>
          <mat-label>Last Name</mat-label>
          <input matInput formControlName="lastName" required>
          <mat-error *ngIf="personalDetails?.get(['lastName']).errors?.required">Last Name is required</mat-error>
          <mat-error *ngIf="personalDetails?.get(['lastName']).hasError('minlength')">Minimum 3 characters required</mat-error>
          <mat-error *ngIf="personalDetails?.get(['lastName']).hasError('maxlength')">Maximum 20 characters allowed</mat-error>
        </mat-form-field><br /><br/>
        <mat-form-field>
          <mat-label>Date of Birth</mat-label>
          <input matInput formControlName="dob" [matDatepicker]="birthDatepicker" required>
          <mat-datepicker-toggle matSuffix [for]="birthDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #birthDatepicker></mat-datepicker>
          <mat-error *ngIf="personalDetails?.get(['dob']).errors?.required">Date of Birth is required</mat-error>
        </mat-form-field><br /><br/>
        <mat-form-field>
          <mat-label>Email ID</mat-label>
          <input matInput formControlName="email" required>
          <mat-error *ngIf="personalDetails?.get(['email']).errors?.required">Email ID is required</mat-error>
          <mat-error *ngIf="personalDetails?.get(['email']).hasError('email')">Please enter a valid email id</mat-error>
          <mat-error *ngIf="personalDetails?.get(['email']).hasError('maxlength')">Maximum 50 characters allowed</mat-error>
        </mat-form-field><br /><br/>
        <mat-form-field>
          <mat-label>Mobile Number</mat-label>
          <input matInput formControlName="mobNo" required>
          <mat-error *ngIf="personalDetails?.get(['mobNo']).errors?.required">Mobile Number is required</mat-error>
          <mat-error *ngIf="personalDetails?.get(['mobNo']).hasError('minlength')">Minimum 8 digits required</mat-error>
          <mat-error *ngIf="personalDetails?.get(['mobNo']).hasError('maxlength')">Maximum 12 digits allowed</mat-error>
          <mat-error *ngIf="personalDetails?.get(['mobNo']).hasError('pattern')">Only mumbers allowed</mat-error>
        </mat-form-field><br/><br/>
        <mat-form-field>
          <mat-label>Skills</mat-label>
          <mat-select formControlName="skills" multiple>
            <mat-option *ngFor="let skill of skills" [value]="skill">{{skill}}</mat-option>
          </mat-select>
          <mat-error *ngIf="personalDetails?.get(['skills']).errors?.required">Skills required</mat-error>
        </mat-form-field><br /><br />
        <div>
          <button mat-button matStepperNext type="button" (click)="getRelevantDemands()">Next</button>
        </div>
      </mat-step>

      <mat-step formGroupName="1" [stepControl]="joiningDetails">
        <ng-template matStepLabel>
          <div>Joining Details</div>
        </ng-template>
        <mat-form-field>
          <mat-label>Joining Date</mat-label>
          <input matInput formControlName="jdate" [matDatepicker]="joinDatepicker" required>
          <mat-datepicker-toggle matSuffix [for]="joinDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #joinDatepicker></mat-datepicker>
          <mat-error *ngIf="joiningDetails?.get(['jdate']).errors?.required">Joining Date is required</mat-error>
        </mat-form-field><br /><br/>
        <br /><span>Joining Location</span><br />
        <mat-form-field>
          <mat-label>Address Line 1</mat-label>
          <input matInput formControlName="line1">
          <mat-error *ngIf="joiningDetails?.get(['line1']).hasError('maxlength')">Maximum 30 characters allowed</mat-error>
        </mat-form-field><br /><br/>
        <mat-form-field>
          <mat-label>Address Line 2</mat-label>
          <input matInput formControlName="line2">
          <mat-error *ngIf="joiningDetails?.get(['line2']).hasError('maxlength')">Maximum 30 characters allowed</mat-error>
        </mat-form-field><br /><br/>
        <mat-form-field>
          <mat-label>City</mat-label>
          <input matInput formControlName="city" required>
          <mat-error *ngIf="joiningDetails?.get(['city']).errors?.required">City is required</mat-error>
          <mat-error *ngIf="joiningDetails?.get(['city']).hasError('minlength')">Mininum 3 characters required</mat-error>
          <mat-error *ngIf="joiningDetails?.get(['city']).hasError('maxlength')">Maximum 20 characters allowed</mat-error>
        </mat-form-field><br /><br/>
        <mat-form-field>
          <mat-label>State</mat-label>
          <input matInput formControlName="state" required>
          <mat-error *ngIf="joiningDetails?.get(['state']).errors?.required">State is required</mat-error>
          <mat-error *ngIf="joiningDetails?.get(['state']).hasError('minlength')">Mininum 3 characters required</mat-error>
          <mat-error *ngIf="joiningDetails?.get(['state']).hasError('maxlength')">Maximum 20 characters allowed</mat-error>
        </mat-form-field><br /><br/>
        <mat-form-field>
          <mat-label>Country</mat-label>
          <input matInput formControlName="country" required>
          <mat-error *ngIf="joiningDetails?.get(['country']).errors?.required">Country is required</mat-error>
          <mat-error *ngIf="joiningDetails?.get(['country']).hasError('minlength')">Mininum 3 characters required</mat-error>
          <mat-error *ngIf="joiningDetails?.get(['country']).hasError('maxlength')">Maximum 20 characters allowed</mat-error>
        </mat-form-field><br /><br/>
        <mat-form-field>
          <mat-label>Pin Code</mat-label>
          <input matInput formControlName="pin" required>
          <mat-error *ngIf="joiningDetails?.get(['pin']).errors?.required">Pin code is required</mat-error>
          <mat-error *ngIf="joiningDetails?.get(['pin']).hasError('minlength') || joiningDetails?.get(['pin']).hasError('maxlength')">Enter valid 6 digit code</mat-error>
          <mat-error *ngIf="joiningDetails?.get(['pin']).hasError('pattern')">Only numbers allowed</mat-error>
        </mat-form-field><br /><br />
        <div>
          <button mat-button matStepperPrevious type="button">Back</button>
          <button mat-button matStepperNext type="button">Next</button>
        </div>
      </mat-step>

      <mat-step formGroupName="2" [stepControl]="relevantDemands">
        <ng-template matStepLabel>
          <div>Relevant Demands</div>
        </ng-template>
        <mat-label>Choose a Relevant Demand</mat-label><br/><br/>
        <mat-radio-group formControlName="demand"  #demand><br/>
          <mat-radio-button [value]=null>None</mat-radio-button><br/>
          <mat-radio-button *ngFor="let demand of relevantDmds" [value]="demand">{{demand.id}} | Role: {{demand.role}} | Hiring Manager: {{demand.hiringManager}} | Dept: {{demand.department}} | Team: {{demand.team}}</mat-radio-button><br/>
        </mat-radio-group>
        <br /><br />
        <div>
          <button mat-button matStepperPrevious type="button">Back</button>
          <button mat-button matStepperNext type="button">Next</button>
        </div>
      </mat-step>

      <mat-step formGroupName="3" [stepControl]="onboardingDetails">
        <ng-template matStepLabel>
          <div>Onboarding Details</div>
        </ng-template>

        <mat-form-field>
          <mat-label>Onboarding Date</mat-label>
          <input matInput formControlName="odate" [matDatepicker]="obDatepicker" required>
          <mat-datepicker-toggle matSuffix [for]="obDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #obDatepicker></mat-datepicker>
          <mat-error *ngIf="onboardingDetails?.get(['odate']).errors?.required">Onboarding Date is required</mat-error>
        </mat-form-field><br /><br/>
        <mat-label>Onboarding Status</mat-label><br/>
        <mat-radio-group formControlName="status"><br/>
          <mat-radio-button value="pending">Pending</mat-radio-button>
          <mat-radio-button value="completed">Completed</mat-radio-button><br/>
        </mat-radio-group>
        <mat-error *ngIf="onboardingDetails?.get(['status']).errors?.required">Onboarding Status is required</mat-error><br /><br/>

          <mat-label>BGC Status</mat-label><br/>
          <mat-radio-group formControlName="bgc"><br/>
            <mat-radio-button value="pending">Pending</mat-radio-button>
            <mat-radio-button value="completed">Completed</mat-radio-button><br/>
          </mat-radio-group>
          <mat-error *ngIf="onboardingDetails?.get(['bgc']).errors?.required">BGC Status is required</mat-error><br /><br/>

          <mat-label>Graduation Status</mat-label><br/>
          <mat-radio-group formControlName="grad"><br/>
            <mat-radio-button value="pending">Pending</mat-radio-button>
            <mat-radio-button value="completed">Completed</mat-radio-button><br/>
          </mat-radio-group>
          <mat-error *ngIf="onboardingDetails?.get(['grad']).errors?.required">Graduation Status is required</mat-error><br /><br/>

          <mat-label>Onboardee formalities Status</mat-label><br/>
          <mat-radio-group formControlName="ob"><br/>
            <mat-radio-button value="pending">Pending</mat-radio-button>
            <mat-radio-button value="completed">Completed</mat-radio-button><br/>
          </mat-radio-group>
          <mat-error *ngIf="onboardingDetails?.get(['ob']).errors?.required">Onboardee Formalities Status is required</mat-error><br /><br/>

        <mat-form-field>
          <mat-label>ETA Completion</mat-label>
          <mat-select formControlName="duration">
            <mat-option>--</mat-option>
            <mat-option *ngFor="let time of duration" [value]="time">
              {{time}} weeks
            </mat-option>
          </mat-select>
        </mat-form-field><br /><br />
        <div>
          <button mat-button matStepperPrevious>Back</button>
          <button type="submit" mat-button color="primary">Submit</button> <!-- [disabled]="!addForm.valid" -->
          <button type="button" mat-button color="warn" (click)="cancel()">Cancel</button>
        </div>
      </mat-step>
    </mat-horizontal-stepper>
  </form>

  <a mat-raised-button color="accent" routerLink="/home/ob">
    <mat-icon class="back-icon">arrow_back_ios</mat-icon> Back to Onboardee Page
  </a>
</div>